*{
  box-sizing:border-box;
  margin:0;
  padding:0;
}

body{
  font-family:'Poppins', sans-serif;
  height:100vh;
  overflow:hidden;
  background:linear-gradient(135deg,#f0b2cb,#f1e4b3,#c8eafc);
}

/* ================= PAGES ================= */
.page{
  position:absolute;
  inset:0;
  display:none;
  justify-content:center;
  align-items:center;
  flex-direction:column;
  text-align:center;
  pointer-events:none;
  z-index:10;
}

.page.active{
  display:flex;
  pointer-events:auto;
}

/* ================= LETTER ================= */
.letter{
  background:rgba(255,255,255,0.65);
  backdrop-filter:blur(12px);
  padding:40px;
  border-radius:30px;
  max-width:460px;
  box-shadow:0 20px 40px rgba(0,0,0,0.2);
}

/* ================= FLIP CARDS ================= */
.flip-wrap{
  display:flex;
  gap:30px;
}

.flip-card{
  width:170px;
  height:220px;
  perspective:1000px;
  cursor:pointer;
}

.flip-inner{
  width:100%;
  height:100%;
  transition:.8s;
  transform-style:preserve-3d;
}

.flip-card.flipped .flip-inner{
  transform:rotateY(180deg);
}

.flip-front,
.flip-back{
  position:absolute;
  inset:0;
  border-radius:20px;
  backface-visibility:hidden;
  display:flex;
  justify-content:center;
  align-items:center;
  box-shadow:0 15px 30px rgba(0,0,0,0.25);
}

.flip-front img{ width:100px; }

.flip-back{
  background:linear-gradient(135deg,#ff9a9e,#fad0c4);
  color:#fff;
  transform:rotateY(180deg);
}

/* ================= MUSIC ================= */
.music-grid{
  display:flex;
  gap:30px;
}

.music-card{
  background:#fff;
  width:220px;
  padding:15px;
  border-radius:25px;
  cursor:pointer;
  box-shadow:0 15px 30px rgba(0,0,0,0.2);
  transition:.3s;
}

.music-card:hover{
  transform:scale(1.1);
  box-shadow:0 20px 40px rgba(0,0,0,0.3);
}

.music-card img{
  width:100%;
  border-radius:20px;
}

/* ================= CAKE ================= */
.cake-gif img{
  width:280px;
  cursor:pointer;
}

/* ================= GIFT BOX ================= */
.gift-3d{
  width:260px;
  height:220px;
  position:relative;
  cursor:pointer;
}

.gift-box{
  width:100%;
  height:160px;
  background:#ff5fa2;
  border-radius:25px;
  position:absolute;
  bottom:0;
}

.gift-lid{
  width:100%;
  height:60px;
  background:#ff87c9;
  position:absolute;
  top:0;
  transform-origin:bottom;
  transition:.9s ease;
  border-radius:25px 25px 15px 15px;
}

.gift-3d.open .gift-lid{
  transform:rotateX(-120deg);
}

.gift-ribbon{
  position:absolute;
  left:50%;
  width:26px;
  height:100%;
  background:#ffd166;
  transform:translateX(-50%);
  border-radius:10px;
}

/* ================= SURPRISE CONTENT ================= */
.surprise-content{
  position:absolute;
  inset:0;
  display:none;
  flex-direction:column;
  justify-content:space-between;
  padding:40px 60px;
  background:transparent;
  z-index:30;
}

/* videos on top */
.surprise-top{
  display:flex;
  justify-content:space-around;
  align-items:center;
  gap:30px;
}

.surprise-top video{
  width:40%;
  max-height:240px;
  border-radius:20px;
  box-shadow:0 15px 30px rgba(0,0,0,0.25);
}

/* images on bottom */
.surprise-bottom{
  display:flex;
  justify-content:space-around;
  align-items:center;
  gap:30px;
}

.surprise-bottom img{
  width:22%;
  border-radius:22px;
  box-shadow:0 15px 30px rgba(0,0,0,0.25);
}

/* ================= REVIEW ================= */
.review-hearts span{
  font-size:42px;
  cursor:pointer;
  opacity:.4;
}

.review-hearts span.active{
  opacity:1;
}

/* ================= RETURN GIFTS ================= */
.return-gifts button{
  width:160px;
  height:120px;
  font-size:20px;
  border-radius:20px;
  transition:.3s;
}

.return-gifts button:hover{
  transform:rotateY(12deg) scale(1.08);
  box-shadow:0 20px 40px rgba(0,0,0,0.3);
}

/* ================= GATEWAY ================= */
.gateway{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.45);
  display:flex;
  justify-content:center;
  align-items:center;
  z-index:9999;
}

.gateway.hidden{ display:none; }

.gateway-box{
  background:white;
  padding:30px;
  border-radius:20px;
}

/* ================= FLOATING EFFECTS ================= */
#effects{
  position:fixed;
  inset:0;
  pointer-events:none;
  z-index:999;
}

.effect{
  position:absolute;
  width:120px;
  height:120px;
  background-size:contain;
  background-repeat:no-repeat;
  pointer-events:none;
  z-index:999;
}
.wishCard{
  position:absolute;
  background:rgba(255,255,255,0.9);
  padding:25px;
  border-radius:20px;
  box-shadow:0 20px 40px rgba(0,0,0,0.25);
  z-index:30;
}

.wishCard textarea{
  width:220px;
  height:80px;
  border-radius:10px;
  padding:10px;
}

.wishCard.hidden{
  display:none;
}
.gift-3d{
  perspective: 900px;
}
/* ================= MOBILE SUPPORT (ADDED) ================= */

html, body {
  width: 100%;
  height: 100%;
  overflow: hidden;
  -webkit-text-size-adjust: 100%;
}

/* Make layouts stack nicely on phones */
@media (max-width: 768px){

  .flip-wrap,
  .music-grid,
  .surprise-top,
  .surprise-bottom {
    flex-direction: column;
    align-items: center;
  }

  .flip-card{
    width: 70vw;
    height: 40vh;
  }

  .music-card{
    width: 80vw;
  }

  .cake-gif img{
    width: 70vw;
  }

  .gift-3d{
    width: 70vw;
    height: 40vh;
  }

  .surprise-top video{
    width: 90%;
    max-height: 200px;
  }

  .surprise-bottom img{
    width: 70%;
  }

  .letter{
    max-width: 90vw;
    padding: 25px;
  }

  .return-gifts button{
    width: 80vw;
    height: 80px;
    font-size: 18px;
  }
}

/* Touch safety */
img, video, button, .flip-card, .music-card, .cake-gif, .gift-3d {
  touch-action: manipulation;
  user-select: none;
}
/* ================= MUSIC PLAYER UI (ADDED) ================= */

.music-player-ui{
  margin-top:25px;
  background:rgba(255,255,255,0.9);
  padding:20px;
  border-radius:25px;
  width:90%;
  max-width:420px;
  box-shadow:0 15px 35px rgba(0,0,0,0.3);
}

.now-playing{
  display:flex;
  align-items:center;
  gap:15px;
  margin-bottom:15px;
}

.now-playing img{
  width:70px;
  height:70px;
  border-radius:15px;
  object-fit:cover;
}

#nowTitle{
  font-size:18px;
  font-weight:600;
}

.player-controls{
  display:flex;
  justify-content:center;
  gap:35px;
  margin-bottom:15px;
}

.player-controls button{
  font-size:32px;
  background:none;
  border:none;
  cursor:pointer;
  transition:.2s;
}

.player-controls button:hover{
  transform:scale(1.2);
}

#seekBar{
  width:100%;
}
/* ========== PLAYLIST UI (REDESIGN) ========== */

.playlist-panel{
  background:linear-gradient(135deg,#ffe4ef,#fff1c7);
  padding:30px;
  border-radius:30px;
  width:90%;
  max-width:700px;
  box-shadow:0 25px 50px rgba(0,0,0,0.25);
}

.subtitle{
  font-size:14px;
  opacity:.7;
  margin-bottom:20px;
}

/* mini player */
.mini-player{
  display:flex;
  align-items:center;
  gap:15px;
  background:white;
  padding:12px 15px;
  border-radius:20px;
  margin-bottom:25px;
  box-shadow:0 10px 25px rgba(0,0,0,.15);
}

.mini-player img{
  width:60px;
  height:60px;
  border-radius:12px;
  object-fit:cover;
}

.mini-info{
  flex:1;
}

#nowTitle{
  font-size:14px;
  font-weight:600;
  margin-bottom:5px;
}

#seekBar{
  width:100%;
}

.mini-player button{
  font-size:28px;
  background:none;
  border:none;
}

/* carousel */
.song-carousel{
  display:flex;
  gap:25px;
  overflow-x:auto;
  padding-bottom:20px;
}

.song-carousel::-webkit-scrollbar{ display:none; }

.song-card{
  min-width:180px;
  background:white;
  border-radius:25px;
  padding:15px;
  box-shadow:0 15px 30px rgba(0,0,0,.2);
  cursor:pointer;
  transition:.3s;
}

.song-card:hover{
  transform:scale(1.08);
}

.song-card img{
  width:100%;
  border-radius:20px;
}

.song-card p{
  margin-top:10px;
  font-weight:600;
}

/* continue */
.next-btn{
  margin-top:20px;
  background:#ff4f88;
  color:white;
  padding:12px 25px;
  border-radius:20px;
  font-weight:600;
  display:inline-block;
}
/* Bigger song covers */
.song-card img{
  height:220px;
  object-fit:cover;
}
.song-card{
  min-width:260px;
}
.playlist-panel{
  pointer-events:auto;
}
.playlist-panel{
  transform: scale(1.1);
}

.song-carousel{
  display:flex;
  justify-content:space-between;
  gap:25px;
  overflow:hidden;          /* no sideways scroll */
}

.mini-player{
  padding:20px;
}
/* ðŸ”’ Lock layout to page width */
.page,
.playlist-panel,
.song-carousel{
  max-width:100%;
  overflow-x:hidden;
}
.song-card{
  width:30%;
  min-width:unset;
}
.song-card img{
  width:100%;
  height:200px;
  object-fit:cover;
  border-radius:20px;
}
/* ===== CLEAN MUSIC PAGE LAYOUT ===== */

.song-row{
  display:flex;
  justify-content:center;
  gap:25px;
  width:100%;
  max-width:900px;
}

.song-card{
  width:30%;
  background:white;
  border-radius:25px;
  padding:15px;
  box-shadow:0 15px 30px rgba(0,0,0,.2);
  cursor:pointer;
  transition:.3s;
}

.song-card:hover{
  transform:scale(1.05);
}

.song-card img{
  width:100%;
  height:220px;
  object-fit:cover;
  border-radius:20px;
}

.song-card p{
  margin-top:10px;
  font-weight:600;
}

/* player bar */
.mini-player{
  display:flex;
  align-items:center;
  gap:15px;
  background:white;
  padding:20px;
  border-radius:25px;
  margin-bottom:30px;
  width:90%;
  max-width:700px;
  box-shadow:0 15px 30px rgba(0,0,0,.2);
}

.mini-player img{
  width:70px;
  height:70px;
  border-radius:15px;
  object-fit:cover;
}

.mini-info{
  flex:1;
}

#nowTitle{
  font-weight:600;
  margin-bottom:6px;
}

#seekBar{
  width:100%;
}

.mini-player button{
  font-size:30px;
  background:none;
  border:none;
}
/* Only cake page gets dark */
.page.cake-dark{
  background:black;
}
/* ===== Typing Effect ===== */
.type-text{
  min-height:80px;
  line-height:1.6;
}
#blowHint{
  color:white;
  font-size:22px;
  margin-top:20px;
  animation:pulse 1.5s infinite;
}

@keyframes pulse{
  0%{opacity:.3}
  50%{opacity:1}
  100%{opacity:.3}
}
/* ===== Cake Romantic Text ===== */
.cake-title{
  color:white;
  font-size:36px;
  margin-bottom:5px;
}

.cake-subtitle{
  color:#ffd6e8;
  font-size:18px;
  margin-bottom:20px;
}

/* Blow hint */
#blowHint{
  color:white;
  font-size:22px;
  margin-top:20px;
  animation:pulse 1.5s infinite;
}

@keyframes pulse{
  0%{opacity:.3}
  50%{opacity:1}
  100%{opacity:.3}
}
